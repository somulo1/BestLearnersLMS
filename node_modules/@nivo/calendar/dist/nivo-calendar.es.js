import{alignBox as e,Container as t,useTheme as o,useDimensions as n,useValueFormatter as i,SvgWrapper as r,ResponsiveWrapper as a,degreesToRadians as d,getRelativeCursor as l,isCursorInRect as c}from"@nivo/core";import{BoxLegendSvg as h,renderLegendToCanvas as u}from"@nivo/legends";import*as s from"react";import{memo as f,useCallback as g,useMemo as m,createElement as v,useRef as y,useState as p,useEffect as x}from"react";import{jsx as b,Fragment as S,jsxs as w}from"react/jsx-runtime";import{useTooltip as W,BasicTooltip as L}from"@nivo/tooltip";import{timeFormat as k}from"d3-time-format";import{scaleQuantize as M}from"d3-scale";import C from"lodash/isDate";import z from"lodash/memoize";import V from"lodash/range";import{timeWeek as O,timeYear as I,timeWeeks as H,timeDays as D,timeMonths as B,timeDay as E,timeSunday as P,timeMonday as F,timeTuesday as R,timeWednesday as T,timeThursday as Y,timeFriday as j,timeSaturday as q}from"d3-time";function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},A.apply(this,arguments)}function X(e,t){if(null==e)return{};var o,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}var N,Z=f((function(e){var t=e.years,o=e.legend,n=e.theme;return b(S,{children:t.map((function(e){return b("text",{transform:"translate("+e.x+","+e.y+") rotate("+e.rotation+")",textAnchor:"middle",style:n.labels.text,children:o(e.year)},e.year)}))})})),G=f((function(e){var t=e.path,o=e.borderWidth,n=e.borderColor;return b("path",{d:t,style:{fill:"none",strokeWidth:o,stroke:n,pointerEvents:"none"}})})),J=f((function(e){var t=e.months,o=e.legend,n=e.theme;return b(S,{children:t.map((function(e){return b("text",{transform:"translate("+e.x+","+e.y+") rotate("+e.rotation+")",textAnchor:"middle",style:n.labels.text,children:o(e.year,e.month,e.date)},e.date.toString()+".legend")}))})})),K=f((function(e){var t=e.data,o=e.x,n=e.y,i=e.size,r=e.color,a=e.borderWidth,d=e.borderColor,l=e.isInteractive,c=e.tooltip,h=e.onMouseEnter,u=e.onMouseMove,f=e.onMouseLeave,m=e.onClick,v=e.formatValue,y=W(),p=y.showTooltipFromEvent,x=y.hideTooltip,S=g((function(e){if("value"in t){var o=A({},t,{value:v(t.value),data:A({},t.data)});p(s.createElement(c,A({},o)),e),null==h||h(t,e)}}),[p,c,t,h,v]),w=g((function(e){if("value"in t){var o=A({},t,{value:v(t.value),data:A({},t.data)});p(s.createElement(c,A({},o)),e),u&&u(t,e)}}),[p,c,t,u,v]),L=g((function(e){"value"in t&&(x(),null==f||f(t,e))}),[x,t,f]),k=g((function(e){return null==m?void 0:m(t,e)}),[t,m]);return b("rect",{x:o,y:n,width:i,height:i,style:{fill:r,strokeWidth:a,stroke:d},onMouseEnter:l?S:void 0,onMouseMove:l?w:void 0,onMouseLeave:l?L:void 0,onClick:l?k:void 0})})),Q=f((function(e){var t=e.value,o=e.day,n=e.color;return void 0===t||isNaN(Number(t))?null:b(L,{id:o,value:t,color:n,enableChip:!0})})),U=k("%b"),$={colors:["#61cdbb","#97e3d5","#e8c1a0","#f47560"],align:"center",direction:"horizontal",emptyColor:"#fff",minValue:0,maxValue:"auto",yearSpacing:30,yearLegend:function(e){return e},yearLegendPosition:"before",yearLegendOffset:10,monthBorderWidth:2,monthBorderColor:"#000",monthSpacing:0,monthLegend:function(e,t,o){return U(o)},monthLegendPosition:"before",monthLegendOffset:10,daySpacing:0,dayBorderWidth:1,dayBorderColor:"#000",isInteractive:!0,legends:[],tooltip:Q},_=A({},$,{role:"img"}),ee=A({},$,{pixelRatio:"undefined"!=typeof window&&null!=(N=window.devicePixelRatio)?N:1}),te=A({},_,{dayBorderColor:"#fff",dayRadius:0,square:!0,weekdayLegendOffset:75,firstWeekday:"sunday"}),oe=function(e,t,o){var n=e.map((function(e){return e.value}));return["auto"===t?Math.min.apply(Math,n):t,"auto"===o?Math.max.apply(Math,n):o]},ne=z((function(e){var t,o=e.date,n=e.cellSize,i=e.yearIndex,r=e.yearSpacing,a=e.monthSpacing,d=e.daySpacing,l=e.direction,c=e.originX,h=e.originY,u=new Date(o.getFullYear(),o.getMonth()+1,0),s=O.count(I(o),o),f=O.count(I(u),u),g=o.getDay(),m=u.getDay(),v=c,y=h,p=i*(7*(n+d)+r),x=o.getMonth()*a;"horizontal"===l?(y+=p,v+=x):(y+=x,v+=p);var b={x:v,y:y,width:0,height:0};return"horizontal"===l?(t=["M"+(v+(s+1)*(n+d))+","+(y+g*(n+d)),"H"+(v+s*(n+d))+"V"+(y+7*(n+d)),"H"+(v+f*(n+d))+"V"+(y+(m+1)*(n+d)),"H"+(v+(f+1)*(n+d))+"V"+y,"H"+(v+(s+1)*(n+d))+"Z"].join(""),b.x=v+s*(n+d),b.width=v+(f+1)*(n+d)-b.x,b.height=7*(n+d)):(t=["M"+(v+g*(n+d))+","+(y+(s+1)*(n+d)),"H"+v+"V"+(y+(f+1)*(n+d)),"H"+(v+(m+1)*(n+d))+"V"+(y+f*(n+d)),"H"+(v+7*(n+d))+"V"+(y+s*(n+d)),"H"+(v+g*(n+d))+"Z"].join(""),b.y=y+s*(n+d),b.width=7*(n+d),b.height=y+(f+1)*(n+d)-b.y),{path:t,bbox:b}}),(function(e){var t=e.date,o=e.cellSize,n=e.yearIndex,i=e.yearSpacing,r=e.monthSpacing,a=e.daySpacing,d=e.direction,l=e.originX,c=e.originY;return t.toString()+"."+o+"."+n+"."+i+"."+r+"."+a+"."+d+"."+l+"."+c})),ie=k("%Y-%m-%d"),re=function(t){var o,n=t.width,i=t.height,r=t.from,a=t.to,d=t.direction,l=t.yearSpacing,c=t.monthSpacing,h=t.daySpacing,u=t.align,s=C(r)?r:new Date(r),f=C(a)?a:new Date(a),g=V(s.getFullYear(),f.getFullYear()+1),m=Math.max.apply(Math,g.map((function(e){return H(new Date(e,0,1),new Date(e+1,0,1)).length})))+1,v=function(e){var t,o,n=e.width,i=e.height,r=e.direction,a=e.yearRange,d=e.yearSpacing,l=e.monthSpacing,c=e.daySpacing,h=e.maxWeeks;return"horizontal"===r?(t=(n-12*l-c*h)/h,o=(i-(a.length-1)*d-a.length*(8*c))/(7*a.length)):(t=(n-(a.length-1)*d-a.length*(8*c))/(7*a.length),o=(i-12*l-c*h)/h),Math.min(t,o)}({width:n,height:i,direction:d,yearRange:g,yearSpacing:l,monthSpacing:c,daySpacing:h,maxWeeks:m}),y=v*m+h*m+12*c,p=7*(v+h)*g.length+l*(g.length-1),x="horizontal"===d?y:p,b="horizontal"===d?p:y,S=e({x:0,y:0,width:x,height:b},{x:0,y:0,width:n,height:i},u),w=S[0],W=S[1];o="horizontal"===d?function(e,t,o,n){return function(i,r,a,d){return{x:i+O.count(I(a),a)*(e+n)+n/2+a.getMonth()*o,y:r+a.getDay()*(e+n)+n/2+d*(t+7*(e+n))}}}(v,l,c,h):function(e,t,o,n){return function(i,r,a,d){var l=O.count(I(a),a);return{x:i+a.getDay()*(e+n)+n/2+d*(t+7*(e+n)),y:r+l*(e+n)+n/2+a.getMonth()*o}}}(v,l,c,h);var L=[],k=[],M=[];return g.forEach((function(e,t){var n=new Date(e,0,1),i=new Date(e+1,0,1);M=M.concat(D(n,i).map((function(e){return A({date:e,day:ie(e),size:v},o(w,W,e,t))})));var r=B(n,i).map((function(e){return A({date:e,year:e.getFullYear(),month:e.getMonth()},ne({originX:w,originY:W,date:e,direction:d,yearIndex:t,yearSpacing:l,monthSpacing:c,daySpacing:h,cellSize:v}))}));k=k.concat(r),L.push({year:e,bbox:{x:r[0].bbox.x,y:r[0].bbox.y,width:r[11].bbox.x-r[0].bbox.x+r[11].bbox.width,height:r[11].bbox.y-r[0].bbox.y+r[11].bbox.height}})})),{years:L,months:k,days:M,cellSize:v,calendarWidth:x,calendarHeight:b,originX:w,originY:W}},ae=function(e){var t=e.days,o=e.data,n=e.colorScale,i=e.emptyColor;return t.map((function(e){var t=o.find((function(t){return t.day===e.day}));return A({},e,t?{color:n(t.value),data:t,value:t.value}:{color:i})}))},de=function(e){var t=e.years,o=e.direction,n=e.position,i=e.offset;return t.map((function(e){var t=0,r=0,a=0;return"horizontal"===o&&"before"===n?(t=e.bbox.x-i,r=e.bbox.y+e.bbox.height/2,a=-90):"horizontal"===o&&"after"===n?(t=e.bbox.x+e.bbox.width+i,r=e.bbox.y+e.bbox.height/2,a=-90):"vertical"===o&&"before"===n?(t=e.bbox.x+e.bbox.width/2,r=e.bbox.y-i):(t=e.bbox.x+e.bbox.width/2,r=e.bbox.y+e.bbox.height+i),A({},e,{x:t,y:r,rotation:a})}))},le=function(e){var t=e.months,o=e.direction,n=e.position,i=e.offset;return t.map((function(e){var t=0,r=0,a=0;return"horizontal"===o&&"before"===n?(t=e.bbox.x+e.bbox.width/2,r=e.bbox.y-i):"horizontal"===o&&"after"===n?(t=e.bbox.x+e.bbox.width/2,r=e.bbox.y+e.bbox.height+i):"vertical"===o&&"before"===n?(t=e.bbox.x-i,r=e.bbox.y+e.bbox.height/2,a=-90):(t=e.bbox.x+e.bbox.width+i,r=e.bbox.y+e.bbox.height/2,a=-90),A({},e,{x:t,y:r,rotation:a})}))},ce=function(e){var t=e.width,o=e.height,n=e.from,i=e.to,r=e.direction,a=e.yearSpacing,d=e.monthSpacing,l=e.daySpacing,c=e.align;return m((function(){return re({width:t,height:o,from:n,to:i,direction:r,yearSpacing:a,monthSpacing:d,daySpacing:l,align:c})}),[t,o,n,i,r,a,d,l,c])},he=function(e){var t=e.data,o=e.minValue,n=e.maxValue,i=e.colors,r=e.colorScale;return m((function(){if(r)return r;var e=oe(t,o,n);return M().domain(e).range(i)}),[t,o,n,i,r])},ue=function(e){var t=e.years,o=e.direction,n=e.yearLegendPosition,i=e.yearLegendOffset;return m((function(){return de({years:t,direction:o,position:n,offset:i})}),[t,o,n,i])},se=function(e){var t=e.months,o=e.direction,n=e.monthLegendPosition,i=e.monthLegendOffset;return m((function(){return le({months:t,direction:o,position:n,offset:i})}),[t,o,n,i])},fe=function(e){var t=e.days,o=e.data,n=e.colorScale,i=e.emptyColor;return m((function(){return ae({days:t,data:o,colorScale:n,emptyColor:i})}),[t,o,n,i])},ge=["months","years"],me=["isInteractive","renderWrapper","theme"],ve=function(e){var t=e.margin,a=e.width,d=e.height,l=e.align,c=void 0===l?_.align:l,u=e.colors,s=void 0===u?_.colors:u,f=e.colorScale,g=e.data,m=e.direction,v=void 0===m?_.direction:m,y=e.emptyColor,p=void 0===y?_.emptyColor:y,x=e.from,S=e.to,W=e.minValue,L=void 0===W?_.minValue:W,k=e.maxValue,M=void 0===k?_.maxValue:k,C=e.valueFormat,z=e.legendFormat,V=e.yearLegend,O=void 0===V?_.yearLegend:V,I=e.yearLegendOffset,H=void 0===I?_.yearLegendOffset:I,D=e.yearLegendPosition,B=void 0===D?_.yearLegendPosition:D,E=e.yearSpacing,P=void 0===E?_.yearSpacing:E,F=e.monthBorderColor,R=void 0===F?_.monthBorderColor:F,T=e.monthBorderWidth,Y=void 0===T?_.monthBorderWidth:T,j=e.monthLegend,q=void 0===j?_.monthLegend:j,N=e.monthLegendOffset,Q=void 0===N?_.monthLegendOffset:N,U=e.monthLegendPosition,$=void 0===U?_.monthLegendPosition:U,ee=e.monthSpacing,te=void 0===ee?_.monthSpacing:ee,oe=e.dayBorderColor,ne=void 0===oe?_.dayBorderColor:oe,ie=e.dayBorderWidth,re=void 0===ie?_.dayBorderWidth:ie,ae=e.daySpacing,de=void 0===ae?_.daySpacing:ae,le=e.isInteractive,me=void 0===le?_.isInteractive:le,ve=e.tooltip,ye=void 0===ve?_.tooltip:ve,pe=e.onClick,xe=e.onMouseEnter,be=e.onMouseLeave,Se=e.onMouseMove,we=e.legends,We=void 0===we?_.legends:we,Le=e.role,ke=void 0===Le?_.role:Le,Me=o(),Ce=n(a,d,t),ze=Ce.margin,Ve=Ce.innerWidth,Oe=Ce.innerHeight,Ie=Ce.outerWidth,He=Ce.outerHeight,De=ce({width:Ve,height:Oe,from:x,to:S,direction:v,yearSpacing:P,monthSpacing:te,daySpacing:de,align:c}),Be=De.months,Ee=De.years,Pe=X(De,ge),Fe=he({data:g,minValue:L,maxValue:M,colors:s,colorScale:f}),Re=se({months:Be,direction:v,monthLegendPosition:$,monthLegendOffset:Q}),Te=ue({years:Ee,direction:v,yearLegendPosition:B,yearLegendOffset:H}),Ye=fe({days:Pe.days,data:g,colorScale:Fe,emptyColor:p}),je=i(z),qe=i(C);return w(r,{width:Ie,height:He,margin:ze,role:ke,children:[Ye.map((function(e){return b(K,{data:e,x:e.x,y:e.y,size:e.size,color:e.color,borderWidth:re,borderColor:ne,onMouseEnter:xe,onMouseLeave:be,onMouseMove:Se,isInteractive:me,tooltip:ye,onClick:pe,formatValue:qe},e.date.toString())})),Be.map((function(e){return b(G,{path:e.path,borderWidth:Y,borderColor:R},e.date.toString())})),b(J,{months:Re,legend:q,theme:Me}),b(Z,{years:Te,legend:O,theme:Me}),We.map((function(e,t){var o=Fe.ticks(e.itemCount).map((function(e){return{id:e,label:je(e),color:Fe(e)}}));return b(h,A({},e,{containerWidth:a,containerHeight:d,data:o}),t)}))]})},ye=function(e){var o=e.isInteractive,n=void 0===o?_.isInteractive:o,i=e.renderWrapper,r=e.theme,a=X(e,me);return b(t,{isInteractive:n,renderWrapper:i,theme:r,children:b(ve,A({isInteractive:n},a))})},pe=k("%Y-%m-%d"),xe=function(e){var t,o,n=e.direction,i=e.daySpacing,r=e.offset,a=e.square,d=e.totalDays,l=e.width,c=e.height;"horizontal"===n?(l-=r,t=7,o=Math.ceil(d/7)):(c-=r,o=7,t=Math.ceil(d/7));var h=(c-i*(t+1))/t,u=(l-i*(o+1))/o,s=Math.min(h,u);return{columns:o,rows:t,cellHeight:a?s:h,cellWidth:a?s:u}},be=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Se(e){return be.findIndex((function(t){return t.toLowerCase()===e}))}var we=function(e,t){var o=e.getDay()-Se(t);return[0,1,2,3,4,5,6].slice(o)[0]};function We(e){var t=e.startDate,o=e.date,n=e.direction,i=e.firstWeekday,r=function(e){return[P,F,R,T,Y,j,q][Se(e)]}(i),a=r.count(t,o),d=o.getMonth(),l=o.getFullYear(),c=0,h=0;return"horizontal"===n?(c=a,h=we(o,i)):(c=we(o,i),h=a),{currentColumn:c,year:l,currentRow:h,firstWeek:a,month:d,date:o}}var Le=function(e){var t=e.direction,o=e.colorScale,n=e.emptyColor,i=e.from,r=e.to,a=e.data,d=e.cellWidth,l=e.cellHeight,c=e.daySpacing,h=e.offset,u=e.firstWeekday,s=c,f=c;"horizontal"===t?s+=h:f+=h;var g=i||a[0].date,m=r||a[a.length-1].date,v=C(g)?g:new Date(g),y=C(m)?m:new Date(m);return D(v,y).map((function(e){return{date:e,day:pe(e)}})).map((function(e){var i=a.find((function(t){return t.day===e.day})),r=We({startDate:v,date:e.date,direction:t,firstWeekday:u}),h=r.currentColumn,g=r.currentRow,m=r.firstWeek,y=r.year,p=r.month,x=r.date,b={x:s+c*h+d*h,y:f+c*g+l*g};return i?A({},i,{coordinates:b,firstWeek:m,month:p,year:y,date:x,color:o(i.value),width:d,height:l}):A({},e,{coordinates:b,firstWeek:m,month:p,year:y,date:x,color:n,width:d,height:l})}))},ke=function(e){var t,o,n=e.cellHeight,i=e.cellWidth,r=e.direction,a=e.daySpacing,d=e.ticks,l=void 0===d?[1,3,5]:d,c=e.firstWeekday,h=e.arrayOfWeekdays,u=void 0===h?(t=be,o=Se(c),t.length&&o?(o%=t.length,t.slice(o,t.length).concat(t.slice(0,o))):t):h,s=i+a,f=n+a;return l.map((function(e){return{value:u[e],rotation:"horizontal"===r?0:-90,y:"horizontal"===r?f*(e+1)-f/3:0,x:"horizontal"===r?0:s*(e+1)-s/3}}))},Me=function(e){var t=e.direction,o=e.daySpacing,n=e.days,i=e.cellHeight,r=e.cellWidth;return n.reduce((function(e,n){if(e.weeks.length===n.firstWeek||!e.weeks.length&&1===n.firstWeek){e.weeks.push(n);var a=n.year+"-"+n.month;if(Object.keys(e.months).includes(a))"horizontal"===t?e.months[a].bbox.width=(n.firstWeek-e.months[a].firstWeek)*(r+o):e.months[a].bbox.height=(n.firstWeek-e.months[a].firstWeek)*(i+o);else{var d={x:0,y:0,width:0,height:0};"horizontal"===t?(d.x=n.coordinates.x-o,d.height=i+o,d.width=r+2*o):(d.y=n.coordinates.y-o,d.height=i+2*o,d.width=r+2*o),e.months[a]={date:n.date,bbox:d,firstWeek:n.firstWeek,month:0,year:0}}}return e}),{months:{},weeks:[]})},Ce=function(e){var t,o,n=e.from,i=e.to,r=e.data;return t=n?C(n)?n:new Date(n):r[0].date,o=n&&i?C(i)?i:new Date(i):r[r.length-1].date,t.getDay()+E.count(t,o)},ze=f((function(e){var t=e.data,o=e.x,n=e.ry,i=void 0===n?5:n,r=e.rx,a=void 0===r?5:r,d=e.y,l=e.width,c=e.height,h=e.color,u=e.borderWidth,s=e.borderColor,f=e.isInteractive,m=e.tooltip,y=e.onMouseEnter,p=e.onMouseMove,x=e.onMouseLeave,S=e.onClick,w=e.formatValue,L=W(),k=L.showTooltipFromEvent,M=L.hideTooltip,C=g((function(e){if("value"in t){var o=A({},t,{value:w(t.value)});k(v(m,A({},o)),e),null==y||y(t,e)}}),[k,m,t,y,w]),z=g((function(e){if("value"in t){var o=A({},t,{value:w(t.value)});k(v(m,A({},o)),e),null==p||p(t,e)}}),[k,m,t,p,w]),V=g((function(e){"value"in t&&(M(),null==x||x(t,e))}),[M,t,x]),O=g((function(e){return null==S?void 0:S(t,e)}),[t,S]);return b("rect",{x:o,y:d,rx:a,ry:i,width:l,height:c,style:{fill:h,strokeWidth:u,stroke:s},onMouseEnter:f?C:void 0,onMouseMove:f?z:void 0,onMouseLeave:f?V:void 0,onClick:f?O:void 0})})),Ve=["isInteractive","renderWrapper","theme"],Oe=function(e){var t=e.margin,a=e.width,d=e.height,l=e.square,c=void 0===l?te.square:l,u=e.colors,s=void 0===u?te.colors:u,f=e.colorScale,g=e.emptyColor,v=void 0===g?te.emptyColor:g,y=e.from,p=e.to,x=e.data,S=e.direction,W=void 0===S?te.direction:S,L=e.minValue,k=void 0===L?te.minValue:L,M=e.maxValue,C=void 0===M?te.maxValue:M,z=e.valueFormat,V=e.legendFormat,O=e.monthLegend,I=void 0===O?te.monthLegend:O,H=e.monthLegendOffset,D=void 0===H?te.monthLegendOffset:H,B=e.monthLegendPosition,E=void 0===B?te.monthLegendPosition:B,P=e.weekdayLegendOffset,F=void 0===P?te.weekdayLegendOffset:P,R=e.weekdayTicks,T=e.dayBorderColor,Y=void 0===T?te.dayBorderColor:T,j=e.dayBorderWidth,q=void 0===j?te.dayBorderWidth:j,X=e.daySpacing,N=void 0===X?te.daySpacing:X,Z=e.dayRadius,G=void 0===Z?te.dayRadius:Z,K=e.isInteractive,Q=void 0===K?te.isInteractive:K,U=e.tooltip,$=void 0===U?te.tooltip:U,_=e.onClick,ee=e.onMouseEnter,oe=e.onMouseLeave,ne=e.onMouseMove,ie=e.legends,re=void 0===ie?te.legends:ie,ae=e.role,de=void 0===ae?te.role:ae,le=e.firstWeekday,ce=void 0===le?te.firstWeekday:le,ue=n(a,d,t),fe=ue.margin,ge=ue.innerWidth,me=ue.innerHeight,ve=ue.outerWidth,ye=ue.outerHeight,pe=m((function(){return x.map((function(e){return A({},e,{date:new Date(e.day+"T00:00:00")})})).sort((function(e,t){return e.day.localeCompare(t.day)}))}),[x]),be=o(),Se=he({data:pe,minValue:k,maxValue:C,colors:s,colorScale:f}),we=Ce({from:y,to:p,data:pe}),We=xe({square:c,offset:F,totalDays:we,width:ge,height:me,daySpacing:N,direction:W}),Ve=We.cellHeight,Oe=We.cellWidth,Ie=Le({offset:F,colorScale:Se,emptyColor:v,cellHeight:Ve,cellWidth:Oe,from:y,to:p,data:pe,direction:W,daySpacing:N,firstWeekday:ce}),He=Object.values(Me({daySpacing:N,direction:W,cellHeight:Ve,cellWidth:Oe,days:Ie}).months),De=ke({direction:W,cellHeight:Ve,cellWidth:Oe,daySpacing:N,ticks:R,firstWeekday:ce}),Be=se({months:He,direction:W,monthLegendPosition:E,monthLegendOffset:D}),Ee=i(z),Pe=i(V);return w(r,{width:ve,height:ye,margin:fe,role:de,children:[De.map((function(e){return b("text",{transform:"translate("+e.x+","+e.y+") rotate("+e.rotation+")",textAnchor:"left",style:be.labels.text,children:e.value},e.value)})),Ie.map((function(e){return b(ze,{data:e,x:e.coordinates.x,rx:G,y:e.coordinates.y,ry:G,width:Oe,height:Ve,color:e.color,borderWidth:q,borderColor:Y,onMouseEnter:ee,onMouseLeave:oe,onMouseMove:ne,isInteractive:Q,tooltip:$,onClick:_,formatValue:Ee},e.date.toString())})),b(J,{months:Be,legend:I,theme:be}),re.map((function(e,t){var o=Se.ticks(e.itemCount).map((function(e){return{id:e,label:Pe(e),color:Se(e)}}));return b(h,A({},e,{containerWidth:a,containerHeight:d,data:o}),t)}))]})},Ie=function(e){var o=e.isInteractive,n=void 0===o?te.isInteractive:o,i=e.renderWrapper,r=e.theme,a=X(e,Ve);return b(t,{isInteractive:n,renderWrapper:i,theme:r,children:b(Oe,A({isInteractive:n},a))})},He=function(e){return b(a,{children:function(t){var o=t.width,n=t.height;return b(Ie,A({width:o,height:n},e))}})},De=function(e){return b(a,{children:function(t){var o=t.width,n=t.height;return b(ye,A({width:o,height:n},e))}})},Be=["months","years"],Ee=["isInteractive","renderWrapper","theme"],Pe=function(e,t,o,n,i,r){var a=l(t,e),d=a[0],h=a[1];return o.find((function(e){return"value"in e&&c(e.x+r.left-i/2,e.y+r.top-i/2,n+i,n+i,d,h)}))},Fe=f((function(e){var t=e.margin,r=e.width,a=e.height,l=e.pixelRatio,c=void 0===l?ee.pixelRatio:l,h=e.align,f=void 0===h?ee.align:h,m=e.colors,v=void 0===m?ee.colors:m,S=e.colorScale,w=e.data,L=e.direction,k=void 0===L?ee.direction:L,M=e.emptyColor,C=void 0===M?ee.emptyColor:M,z=e.from,V=e.to,O=e.minValue,I=void 0===O?ee.minValue:O,H=e.maxValue,D=void 0===H?ee.maxValue:H,B=e.valueFormat,E=e.legendFormat,P=e.yearLegend,F=void 0===P?ee.yearLegend:P,R=e.yearLegendOffset,T=void 0===R?ee.yearLegendOffset:R,Y=e.yearLegendPosition,j=void 0===Y?ee.yearLegendPosition:Y,q=e.yearSpacing,N=void 0===q?ee.yearSpacing:q,Z=e.monthLegend,G=void 0===Z?ee.monthLegend:Z,J=e.monthLegendOffset,K=void 0===J?ee.monthLegendOffset:J,Q=e.monthLegendPosition,U=void 0===Q?ee.monthLegendPosition:Q,$=e.monthSpacing,_=void 0===$?ee.monthSpacing:$,te=e.dayBorderColor,oe=void 0===te?ee.dayBorderColor:te,ne=e.dayBorderWidth,ie=void 0===ne?ee.dayBorderWidth:ne,re=e.daySpacing,ae=void 0===re?ee.daySpacing:re,de=e.isInteractive,le=void 0===de?ee.isInteractive:de,ge=e.tooltip,me=void 0===ge?ee.tooltip:ge,ve=e.onClick,ye=e.onMouseEnter,pe=e.onMouseLeave,xe=e.onMouseMove,be=e.legends,Se=void 0===be?ee.legends:be,we=y(null),We=n(r,a,t),Le=We.innerWidth,ke=We.innerHeight,Me=We.outerWidth,Ce=We.outerHeight,ze=We.margin,Ve=ce({width:Le,height:ke,from:z,to:V,direction:k,yearSpacing:N,monthSpacing:_,daySpacing:ae,align:f}),Oe=Ve.months,Ie=Ve.years,He=X(Ve,Be),De=he({data:w,minValue:I,maxValue:D,colors:v,colorScale:S}),Ee=se({months:Oe,direction:k,monthLegendPosition:U,monthLegendOffset:K}),Fe=ue({years:Ie,direction:k,yearLegendPosition:j,yearLegendOffset:T}),Re=fe({days:He.days,data:w,colorScale:De,emptyColor:C}),Te=p(null),Ye=Te[0],je=Te[1],qe=o(),Ae=i(B),Xe=i(E),Ne=W(),Ze=Ne.showTooltipFromEvent,Ge=Ne.hideTooltip;x((function(){var e;if(we.current){we.current.width=Me*c,we.current.height=Ce*c;var t=we.current.getContext("2d");t&&(t.scale(c,c),t.fillStyle=qe.background,t.fillRect(0,0,Me,Ce),t.translate(ze.left,ze.top),Re.forEach((function(e){t.fillStyle=e.color,ie>0&&(t.strokeStyle=oe,t.lineWidth=ie),t.beginPath(),t.rect(e.x,e.y,e.size,e.size),t.fill(),ie>0&&t.stroke()})),t.textAlign="center",t.textBaseline="middle",t.fillStyle=null!=(e=qe.labels.text.fill)?e:"",t.font=qe.labels.text.fontSize+"px "+qe.labels.text.fontFamily,Ee.forEach((function(e){t.save(),t.translate(e.x,e.y),t.rotate(d(e.rotation)),t.fillText(String(G(e.year,e.month,e.date)),0,0),t.restore()})),Fe.forEach((function(e){t.save(),t.translate(e.x,e.y),t.rotate(d(e.rotation)),t.fillText(String(F(e.year)),0,0),t.restore()})),Se.forEach((function(e){var o=De.ticks(e.itemCount).map((function(e){return{id:e,label:Xe(e),color:De(e)}}));u(t,A({},e,{data:o,containerWidth:Le,containerHeight:ke,theme:qe}))})))}}),[we,ke,Le,Me,Ce,c,ze,Re,oe,ie,S,F,Fe,G,Ee,Se,qe,Xe,De]);var Je=g((function(e){if(we.current){var t=Pe(e,we.current,Re,Re[0].size,ie,ze);if(t){if(je(t),!("value"in t))return;var o=A({},t,{value:Ae(t.value),data:A({},t.data)});Ze(s.createElement(me,A({},o)),e),!Ye&&(null==ye||ye(t,e)),null==xe||xe(t,e),Ye&&(null==pe||pe(t,e))}else Ge(),t&&(null==pe||pe(t,e))}}),[we,Ye,ze,Re,je,Ae,ie,Ze,Ge,ye,xe,pe,me]),Ke=g((function(){je(null),Ge()}),[je,Ge]),Qe=g((function(e){if(ve&&we.current){var t=Pe(e,we.current,Re,Re[0].size,ae,ze);t&&ve(t,e)}}),[we,ae,ze,Re,ve]);return b("canvas",{ref:we,width:Me*c,height:Ce*c,style:{width:Me,height:Ce},onMouseEnter:le?Je:void 0,onMouseMove:le?Je:void 0,onMouseLeave:le?Ke:void 0,onClick:le?Qe:void 0})})),Re=function(e){var o=e.isInteractive,n=void 0===o?ee.isInteractive:o,i=e.renderWrapper,r=e.theme,a=X(e,Ee);return b(t,{isInteractive:n,renderWrapper:i,theme:r,children:b(Fe,A({isInteractive:n},a))})},Te=function(e){return b(a,{children:function(t){var o=t.width,n=t.height;return b(Re,A({width:o,height:n},e))}})};export{be as ARRAY_OF_WEEKDAYS,ye as Calendar,Re as CalendarCanvas,De as ResponsiveCalendar,Te as ResponsiveCalendarCanvas,He as ResponsiveTimeRange,Ie as TimeRange,ae as bindDaysData,ee as calendarCanvasDefaultProps,_ as calendarDefaultProps,Le as computeCellPositions,xe as computeCellSize,oe as computeDomain,re as computeLayout,le as computeMonthLegendPositions,Me as computeMonthLegends,Ce as computeTotalDays,ke as computeWeekdays,de as computeYearLegendPositions,we as getDayIndex,Se as getFirstWeekdayIndex,te as timeRangeDefaultProps,ce as useCalendarLayout,he as useColorScale,fe as useDays,se as useMonthLegends,ue as useYearLegends};
//# sourceMappingURL=nivo-calendar.es.js.map
